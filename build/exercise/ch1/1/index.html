<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lemonie - Question 1</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-firestore.js"></script>
    <script type="text/javascript" src="../../../app.js"></script>
    <link rel="stylesheet" href="../../../styles.css">
</head>

<body>

    <!-- Header Stuff -->
    <header id="head" class=" text-gray-600 header-font ">
        <div class="mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center bg-sunglow-500 ">
            <a class="flex title-font font-medium items-center text-green-900 mb-4 md:mb-0 ">
                <span class="ml-3 text-xl font-lemtitle font-black ">Lemonie</span>
                <span class="ml-3 text-l font-normal ">Self reflection for recovery</span>
            </a>
            <nav class="md:ml-auto flex flex-wrap items-center text-base justify-center uppercase ">
                <a class="mr-5 hover:text-gray-900 " href="../../../">Dashboard</a>
                <a class="mr-5 hover:text-gray-900 " href="../../../leaderboard/">Leaderboard</a>
                <a class="mr-5 hover:text-gray-900 " href="../../../pricing/">Pricing</a>
                <a class="mr-5 hover:text-gray-900 " href="../../../signup/">Points: {{ points }}</a>
            </nav>
        </div>
    </header>

    <script>
        var head = new Vue({
            el: '#head',
            data() {
                return {
                    points: 0
                }
            },
            mounted() {
                getUser("N7suCL0ALbhRAGFDWg5E").then(response => {
                    console.log(response);
                    this.points = response.overallScore;
                })
            }
        })
    </script>

    <!-- Main page content -->
    <section id="app" class="text-gray-600 header-font">
        <div class="grid pt-8 justify-center justify-items-center">
            <h1 class="text-green-900 text-2xl font-lemtitle font-semibold">
                {{ heading }}
            </h1>
            <p class="text-lg">{{ title }}</p>
        </div>


        <div class="
            grid grid-cols-1
            justify-center justify-items-center
            my-4
            lg:w-4/5
            sm:mx-auto
            sm:mb-2
            mx-2
          ">

            <div class="p-2 lg:w-2/3 md:w-2/3">
                <div class="
          h-full
          bg-gray-50 bg-opacity-75
          px-8
          py-3
          rounded-lg
          overflow-hidden
          text-center
          relative
        ">
                    <p class="leading-relaxed">
                        {{ intro }}
                    </p>
                </div>
            </div>

            <!-- Tick boxes - generated by vue -->
            <div class="p-2 sm:w-2/3 w-full" v-for="(choice,index) in statements" :key="choice">
                <div class="bg-gray-100 rounded flex p-4 h-full items-center">
                    <input v-bind:id="index" class="text-gray-300 w-6 h-6 flex-shrink-0 mr-4" viewBox="0 0 24 24" type="checkbox">
                    <span class="title-font font-medium text-left">{{ choice }}</span>

                </div>
            </div>

            <!-- Submit button -->
            <div class="p-2 pt-4 sm:w-2/3 w-full">
                <button class="
                  flex
                  ml-auto
                  text-gray-600
                  bg-sunglow-500
                  border-0
                  py-2
                  px-6
                  focus:outline-none
                  hover:bg-sunglow-600
                  hover:text-gray-900
                  rounded
                ">
                Submit <span v-if="value > 0" v-on:click="add" >&nbsp;(+{{ value }} points!)</span>
              </button>
            </div>
        </div>

    </section>

    <script>
        var app = new Vue({
            el: '#app',
            // Submit button
            methods: {
                add: function(event) {
                    (async() => {
                        let x = await addPoints('N7suCL0ALbhRAGFDWg5E', this.value)
                        console.log(x)
                        window.location.href = '../2/'
                    })()
                }
            },
            // Fill the tickboxes with database stuff
            data() {
                return {
                    heading: "heading",
                    title: "title",
                    intro: "intro text",
                    statements: null,
                    value: 0,
                }
            },
            mounted() {
                getExercise("oVg1icfURf9aFbNbf3TC").then(response => {
                        console.log(response);
                        this.heading = response.moduleName;
                        this.title = response.level;
                        this.intro = response.introText;
                        this.statements = response.questionArray
                        this.value = response.points
                    }

                )
            }
        })
    </script>


</body>

</html>